ğŸ§­ WHAT MUST BE BUILT â€” FULL LIST
A. Core Entity Layer (MISSING)

We must create:

1ï¸âƒ£ entities/event.py

Defines the event model. Required.

2ï¸âƒ£ entities/fact.py

Defines non-event facts (OCCU, RESI, NATU, etc.).

3ï¸âƒ£ entities/tag_constants.py

Central mapping of GEDCOM tags â†’ event/fact types.

B. Parsing Layer (BROKEN)

We must repair:

4ï¸âƒ£ extractor.py

Currently extracts only strings.
Must build Event objects via a factory.

5ï¸âƒ£ tree_builder.py

Currently attaches event.tag (string).
Must attach event.to_dict().

C. Normalization Layer (MISSING)
6ï¸âƒ£ normalization/event_normalizer.py

Normalizes:

date formats

place strings

age fields

witnesses, roles, etc.

D. Postprocessing Layer (PARTIAL / NON-FUNCTIONAL)
7ï¸âƒ£ postprocess/event_disambiguator.py

Must resolve conflicts, duplicates, mixed tagging.

8ï¸âƒ£ postprocess/event_scoring.py

Must score structured events.
Currently useless because events are strings.

ğŸ¯ ORDER OF OPERATIONS (MOST PRACTICAL PLAN)

Here is the correctâ€”and safeâ€”order to rebuild the system without losing functionality:

PHASE 1 â€” Build Foundational Event Model

1ï¸âƒ£ Create entities/event.py
2ï¸âƒ£ Create entities/fact.py
3ï¸âƒ£ Create entities/tag_constants.py

Deliverables:
â€¢ Event class
â€¢ Fact class
â€¢ .to_dict() and .from_dict()
â€¢ event-type lookup tables

This phase REQUIRES no changes to the rest of the system yet.

PHASE 2 â€” Repair Parsing Layer

4ï¸âƒ£ Modify extractor.py â†’ build Event objects
5ï¸âƒ£ Modify tree_builder.py â†’ emit dicts, not strings
6ï¸âƒ£ Modify parser_core.py â†’ integrate event construction

Deliverables:

Parsed individuals contain events = [ {dict}, {dict}, ... ]

No raw strings like "BIRT"

At this point, your Step 1 â†’ Step 3 pipeline will start working correctly.

PHASE 3 â€” Enable Place Standardization

7ï¸âƒ£ Modify place_standardizer.py to consume structured events
8ï¸âƒ£ Add missing standardization for residence, occupation, etc.

PHASE 4 â€” Enable Event Scoring & Disambiguation

Now that events are structured:

9ï¸âƒ£ Rebuild event_disambiguator.py
ğŸ”Ÿ Rebuild event_scoring.py

PHASE 5 â€” Entity Resolution Gains Birth Year, Birth Place

The module entity_resolution.py will now be able to:

extract birth event

compute similarity

block individuals by place/year

Right now, resolution is missing 80% of intended functionality because events don't exist.

ğŸ“Œ THE SINGLE MOST PRACTICAL COURSE OF ACTION
We must implement PHASE 1 and PHASE 2 immediately.

Everything else depends on them.

Until events exist as structured objects:

place standardizer cannot function

event scoring cannot function

entity resolution cannot match birth years

merging cannot occur

the entire postprocessing pipeline collapses

This is exactly what we saw during the step-by-step run.

ğŸš€ YOUR NEXT ACTION

Tell me:

ğŸ‘‰ Do you want me to generate Phase 1 (Event model layer) now?

This includes:

event.py

fact.py

tag_constants.py

full Pydantic models (or lightweight classes)

examples & test harness

integration notes for later phases

I will deliver fully working code that drops directly into your project.

ğŸ“ OPTIONAL (but recommended)

If you want, I can also:

map all your existing GEDCOM event tags (from your real files)

create a dictionary of all observed tags

propose a normalized event ontology

Just say â€œyes, generate event modelâ€.

âœ” Summary

You asked:

What modules are missing?
What needs to be generated?
What needs to be refactored?
What is the correct order?

This message answers all four precisely.

â­ Your move:

Would you like me to generate the missing Event subsystem (Phase 1)?